version: "3.9"
services:
  dovecot:
    build: .
    container_name: dovecot
    ports:
      - "143:143"   # IMAP (STARTTLS)
      - "993:993"   # IMAPS
      - "110:110"   # POP3 (STARTTLS)
      - "995:995"   # POP3S
    volumes:
      - ./conf.d:/etc/dovecot/conf.d:ro
      - maildata:/var/mail
      - ./checkpassword-http.sh:/etc/dovecot/scripts/checkpassword-http.sh
    restart: unless-stopped

volumes:
  maildata: